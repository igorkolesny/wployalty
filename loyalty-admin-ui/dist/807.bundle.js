"use strict";(self.webpackChunkreact_wordpress=self.webpackChunkreact_wordpress||[]).push([[807],{8807:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var l=a(4942),r=a(885),n=a(7294),c=a(3089),o=a(6732),s=a(5831),i=a(3972),m=a(4753),d=a(1401);const u=function(e){var t=e.Dropdown,a=e.setDropdown,l=e.setcustom,r=e.Filter_list,c=e.Filter,o=e.fromDate,s=e.toDate,i=e.custom;return n.createElement("div",{onClick:function(){a(!t),l(!1)},className:"flex  items-center justify-end space-x-3   p-2 px-3 rounded-md cursor-pointer h-10.5"},n.createElement("i",{className:"text-xl leading-0 antialiased wlr wlrf-calendar color-important -mt-0.5"}),n.createElement("div",{className:"text-sm text-heading font-medium text-dark antialiased capitalize flex items-center w-full space-x-3"},n.createElement("p",{className:""}," ",r[c])," ","Custom"===r[c]&&n.createElement("div",null,n.createElement("span",null,"( ",o)," - ",n.createElement("span",null,s," )"))),n.createElement("div",{className:"text-light"},n.createElement("i",{className:"wlr wlrf-down text-lg color-important transform duration-300 ".concat((t||i)&&"rotate-180 ")})))};var f=a(874),h=a(9081),p=a(3399),w=a(7338);const x=function(e){var t=e.children,a=e.value,l=e.setFilter,r=e.setDropdown,c=e.Filter,o=e.Dropdown,s=e.setcustom,i=e.custom;return n.createElement("p",{className:"text-xs 2xl:text-sm ".concat(a==c&&"bg-primary_extra_light"," text-light flex items-center justify-center antialiased py-3 px-2 cursor-pointer hover:bg-primary_extra_light hover:rounded"),onClick:function(){l(a),r(!o),"custom"==a&&s(!i)}},t)},_=function(e){var t=e.Dropdown,a=e.setDropdown,l=e.setFilter,r=e.Filter_list,o=e.Filter,s=e.custom,m=e.fromDate,d=e.toDate,u=e.setFromDate,_=e.setToDate,E=e.getResult,g=e.setcustom,b=(0,n.useContext)(i.Gr);return n.createElement("div",{className:"relative flex items-center justify-center w-37.5"},n.createElement("div",{className:"absolute bg-white  top-0 ".concat(t?"block":"hidden"," shadow-lite2 w-38.5 flex flex-col p-2 border border-gray-300 border-opacity-50 rounded-md mt-1.5")},Object.keys(r).map((function(e,c){return n.createElement(x,{key:c,value:e,Filter:o,custom:s,setFilter:l,setcustom:g,Dropdown:t,setDropdown:a},r[e])}))),n.createElement("div",{className:"absolute flex flex-col justify-start items-start space-y-4 ".concat(s?"block":"hidden"," w-79 top-0  mt-2 rounded-md px-3 py-4 bg-primary_extra_light shadow-lite2 border-gray-300 border border-opacity-50")},n.createElement("div",{className:"flex items-center space-x-2 w-full"},n.createElement(p.Z,{margin:"mt-2",width:"w-1/2"},n.createElement(w.Z,{empty:!0},b.dashboard.from_date),n.createElement(h.Z,{type:"date",value:m,onChange:function(e){""===d?(u(e.target.value),_((0,c.kB)(new Date))):u(e.target.value)},max:(0,c.kB)(new Date),onKeyDown:function(e){return e.preventDefault()}})),n.createElement(p.Z,{margin:"mt-2",width:"w-1/2"},n.createElement(w.Z,{empty:!0},b.dashboard.to_date),n.createElement(h.Z,{type:"date",value:d,onChange:function(e){var t=""===e.target.value&&""===m?"":""===e.target.value?(0,c.kB)(new Date):e.target.value;_(t)},min:m,max:(0,c.kB)(new Date),onKeyDown:function(e){return e.preventDefault()}}))),n.createElement("div",{className:"self-end "},n.createElement(f.Z,{click:function(){E(),g(!1)}},b.dashboard.get_result))))};var E=a(9902),g=a(8085),b=a(2382);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,l.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=n.lazy((function(){return a.e(904).then(a.bind(a,7784))})),Z=n.lazy((function(){return Promise.all([a.e(887),a.e(185)]).then(a.bind(a,6185))})),k=n.lazy((function(){return Promise.all([a.e(887),a.e(555)]).then(a.bind(a,6555))})),N=n.lazy((function(){return Promise.all([a.e(887),a.e(434)]).then(a.bind(a,2434))})),j=n.lazy((function(){return a.e(766).then(a.bind(a,5135))}));const S=function(){var e,t,a=n.useState(!0),l=(0,r.Z)(a,2),f=l[0],h=l[1],p=n.useContext(i.ko).appState,w=n.useState({}),x=(0,r.Z)(w,2),v=x[0],S=x[1],C=n.useState({point:[],revenue:[],reward:[]}),O=(0,r.Z)(C,2),F=O[0],P=O[1],z=n.useContext(i.Gr),B=n.useState(!1),R=(0,r.Z)(B,2),G=R[0],K=R[1],M=n.useState(!1),T=(0,r.Z)(M,2),H=T[0],Y=T[1],q=n.useState((0,c.kB)(new Date)),A=(0,r.Z)(q,2),I=A[0],J=A[1],L=n.useState((0,c.kB)(new Date)),Q=(0,r.Z)(L,2),U=Q[0],V=Q[1],W=n.useState({limit:d.pY,offset:0,loading:!1,activities:[],total_count:1,pageCount:1}),X=(0,r.Z)(W,2),$=X[0],ee=X[1],te={this_month:z.common.select.this_month,last_month:z.common.select.last_month,"90_days":z.common.select.ninety_days,last_year:z.common.select.last_year,custom:z.common.select.custom},ae=n.useState("this_month"),le=(0,r.Z)(ae,2),re=le[0],ne=le[1],ce=n.useState(p.local.dashboard.default_currency),oe=(0,r.Z)(ce,2),se=oe[0],ie=oe[1],me=function(e){"custom"===e.fil_type&&(e.from_date=I,e.to_date=U),ee(y(y({},$),{},{loading:!0})),(0,o.j0)(e).then((function(t){if(!0===t.data.success&&null!==t.data.data){var a=t.data.data;ee(y(y({},$),{},{activities:(0,c.mR)(a,"items",[]),pageCount:Math.ceil(a.total_count/$.limit),offset:e.offset,loading:!1}))}}))},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.local.dashboard.wlr_dashboard_nonce;if(![void 0].includes(e)){!function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r={wlr_nonce:t,action:"wlr_chart_data",fil_type:e,currency:se};"custom"===e&&(r.from_date=a,r.to_date=l),h(!0),(0,o.j0)(r).then((function(e){!0===e.data.success&&null!==e.data.data&&P(e.data.data),h(!1)}))}(re,e,I,U),function(e,t,a,l){var r={wlr_nonce:t,action:"wlr_dashboard_analytic_data",fil_type:e,currency:se};"custom"===e&&(r.from_date=a,r.to_date=l),h(!0),(0,o.j0)(r).then((function(e){!0===e.data.success&&null!==e.data.data&&S(e.data.data),h(!1)}))}(re,e,I,U);var t={action:"wlr_all_customer_activities",wlr_nonce:e,fil_type:re,limit:$.limit,offset:$.offset};me(t)}};return n.useEffect((function(){"custom"!==re&&de()}),[re,se]),n.createElement("div",{className:"flex flex-col  bg-white w-full h-full items-start rounded-b-xl justify-start py-5 px-8 space-y-4 "},n.createElement("div",{className:"flex items-center justify-between w-full z-10"},n.createElement(m.Z,{title:z.dashboard.name}),n.createElement("div",{className:"flex item-center  justify-center space-x-3  "},n.createElement("div",{className:"flex flex-col justify-center items-center border rounded-md border-[#cccccc] "},n.createElement(u,{Dropdown:G,setDropdown:K,custom:H,setcustom:Y,Filter_list:te,Filter:re,fromDate:I,toDate:U}),n.createElement(_,{Dropdown:G,setDropdown:K,Filter_list:te,fromDate:I,Filter:re,setFilter:ne,toDate:U,setFromDate:J,setToDate:V,getResult:de,setcustom:Y,custom:H})),n.createElement("div",{className:"w-[144px] flex items-center   font-medium text-heading",onClick:function(){K(!1)}},n.createElement(s.Z,{options:(e=p.local.dashboard.list_of_currency,t=[],Object.keys(e).map((function(e,a){t.push({value:e,label:e})})),t),value:se,onChange:function(e){K(!1),ie(e.value)},className:"border-none"})))),n.createElement("div",{className:"flex flex-col w-full h-full",onClick:function(){K(!1)}},n.createElement("div",{className:"flex w-full h-full items-center  space-x-5"},f?n.createElement(E.Z,{height:"h-23.5"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-23.5"})},n.createElement(D,{width:"w-2.4/12",icon:n.createElement("i",{className:"text-3xl 2xl:text-4.5xl  wlr wlrf-points color-important "}),value:v.total_points,title:z.dashboard.tot_points.name})),f?n.createElement(E.Z,{height:"h-23.5"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-23.5"})},n.createElement(D,{width:"w-2.4/12",icon:n.createElement("i",{className:"text-4xl 2xl:text-5.5xl wlr wlrf-reward color-important "}),value:v.total_reward,title:z.dashboard.tot_rewards.name})),f?n.createElement(E.Z,{height:"h-23.5"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-23.5"})},n.createElement(D,{width:"w-2.4/12",currencySymbol:!0,icon:n.createElement("i",{className:"text-3.5xl 2xl:text-4.5xl  wlr wlrf-coupon color-important "}),value:v.total_redeem_reward,title:z.dashboard.tot_rewards_redeemed.name})),f?n.createElement(E.Z,{height:"h-23.5"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-23.5"})},n.createElement(D,{width:"w-2.4/12",icon:n.createElement("i",{className:"text-2xl  2xl:text-3.5xl  wlr wlrf-orders color-important "}),value:v.total_order_count,title:z.dashboard.no_of_orders.name})),f?n.createElement(E.Z,{height:"h-23.5"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-23.5"})},n.createElement(D,{width:"w-2.4/12",icon:n.createElement("i",{className:" text-3xl 2xl:text-4.5xl  wlr wlrf-order-value color-important "}),value:v.total_order_value,currencySymbol:!0,title:z.dashboard.order_total.name}))),n.createElement("div",{className:"w-full flex flex-col p-4 shadow-card mt-6 bg-white rounded-lg relative "},n.createElement("div",{className:"flex bg-white justify-between w-full"},n.createElement("h2",{className:"text-lg text-dark font-semibold"},z.dashboard.revenue_txt)),f?n.createElement(E.Z,{height:"h-39"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-39"})},n.createElement(Z,{data:F.revenue,no_data_text:z.common.no_data_text}))),n.createElement("div",{className:"flex w-full items-center space-x-5 mt-6"},n.createElement("div",{className:"flex flex-col p-4 shadow-card w-1/2  bg-white rounded-lg relative "},n.createElement("h2",{className:"text-lg text-dark font-semibold"},z.dashboard.points),f?n.createElement(E.Z,{height:"h-100",width:"w-197"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-115"})},n.createElement(k,{data:F.point,no_data_text:z.common.no_data_text}))),n.createElement("div",{className:"flex flex-col p-4 shadow-card w-1/2 bg-white rounded-lg relative"},n.createElement("h2",{className:"text-lg text-dark font-semibold"},z.dashboard.rewards),f?n.createElement(E.Z,{height:"h-100",width:"w-197"}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-115"})},n.createElement(N,{data:F.reward,no_data_text:z.common.no_data_text})))),n.createElement("div",{className:"bg-white  shadow-card rounded-lg w-full p-6 mt-6 flex flex-col gap-y-2"},n.createElement("div",{className:"flex items-center justify-start"},n.createElement("h2",{className:"font-medium text-lg"},z.common.recent_activities)),$.loading?n.createElement(b.Z,{gap:"gap-y-4",height:"h-78",dataHeight:"h-12.5",listData:$.limit}):n.createElement(n.Suspense,{fallback:n.createElement(E.Z,{height:"h-12.5"})},n.createElement(j,{noData:z.manage_points.user_details.activity.no_activity,State:$})),$.pageCount>1&&n.createElement(g.Z,{handlePageClick:function(e){var t=e.selected,a=Math.ceil(t*$.limit),l={action:"wlr_all_customer_activities",wlr_nonce:p.local.dashboard.wlr_dashboard_nonce,fil_type:re,limit:$.limit,offset:a};me(l)},pageCount:$.pageCount,loading:$.loading}))))}}}]);